# Backend Services

This repository contains the a program that using integration technology between Hedera Token Services (Fungible Token and Non Fungible Token) and Solidity-based smartcontract that designed for the Hedera network. 

The Hedera Token Servies facilitates the system of tokenizing e-Materai of Indonesia (Official Stamp of Legal in Indonesia). The HTS seamlessly minting the e-Materai with certain Metadata that stored on IPFS. In this project, we use IPFS services from Pinata.cloud. In the testnet and also lack of Infrastructure from Indonesia Stamp System Issuer that can provide the real time data, we don't usea any oracle yet for e-Materai NFT. However, we decide to help the Indonesia goverment maturing the infrastructure and integrating with the DLT/Blockchain itself. 

As a result, we try to using Indonesia Government approach in early time by minting the NFT e-Materai by the admin first with the serial code that corellated with the metadata. 

To automatically the services of the e-Materai, we use smartcontract for handle like e-Materai Store. Which is who need the e-Materai can be visit our dApp for buying the e-Materai NFT. However, in Indonesia for the purchasing e-Materai is have to use Indonesia Rupiah as the payment. That's why we integrate the e-Materai purchasing system in the smartcontrat by using HIDR (XenHash Indonesia Rupiah) that cost 11900 of HIDR for 1 e-Materai with value of 10000 Rupiah. The smartcontract will give every user a e-Materai NFT with unique series code and the Smartcontract receive 11900 HIDR. The smartcontract also can be withdrawing the HIDR when the admin/manager of the smartcontract want to. 

Then for the implementation of using e-Materai in the agreement, we provide a smartcontract with EVM based and powered by the Hedera Technology and Network that can store any agreement on-chain and supported by e-Materai attachment. That's what make it unique is how the agreement that we created and sign by the all participants will be stored on-chain and the e-materai support for the legal proof in Indonesia. The agreement system that designed like that will be very powerful, especially for the significantly important agreement. If we compare for the alternative old ways, which is paper system. It will very easy to get physical attack. If with the web2 Technology, we will have risk from the central authority who stored that data. That's why with the DLT/Blockchain technology, we will have very much potential and advantages in stored our agreement on-chain to minimizing risk and but with the exact advantages that can represent what we want in real-world. Which mean the e-Materai is something that we attach to our agreement document and supposed not to re-use, and in our smartcontract its also give the more advantage by make sure the agreement and the e-Materai is tempering proof. 


That's why in this backend services, we will have 3 services:
- Minting e-materai services (Using Hedera Built In HTS for Minting)
- Marketplace/store services (Smartcontract)
- Agreement services (Smartcontract)


## Prerequisites
- Solidity programming knowledge
- Access to the Remix IDE
- A Hedera testnet account (can be obtained via [Hedera Portal](https://portal.hedera.com))
- Typescript to testing smartcontract (Interact)
- Handle Pinata IPFS system 

## Setup Instructions

### 1. Smart Contract Deployment
1. Navigate to [Remix IDE](https://remix.ethereum.org).
2. Upload and set up the relevant smart contract files in the IDE.
3. Compile the contracts individually, ensuring that all contract dependencies are compatible with one another.


### 2. ABI and Bytecode Compilation

1. Once the contracts are successfully compiled, copy the ABI and bytecode generated by Remix.
2. Place the ABI and bytecode into the appropriate locations in your projectâ€™s `artifacts` directory.

### 3. Environment Configuration
1. Ensure that you have the `dotenv` package installed by running:

   npm install dotenv
2. Rename .env.sample to .env in your project directory.
3. Update the .env file with your private key and wallet address. If you don't have a Hedera testnet account, you can create one at Hedera Portal.




### 4. Testing the services
Note: Set the   "type": "module" in package-lock.json if in the processing running these program have some error with the module thing


1. Run the following command to execute the test scripts and verify the services of mint-e-materai.js.

---------------------------
 node mint-e-materai.js
---------------------------

Before running that command, pay attention to how created the metadata or how the metadata is stored in IPFS system via Pinata.cloud. Check the documentation how IPFS systemis made. Then doing batch minting (each batch consist of 10 NFTs). After running that program, Ensure that the transactions are processed correctly, and the minted NFTs is same with what we want exactly (Check the console carefully). 


2. Run the following command to execute the test scripts and verify the services of node e-materai-market-place.js
---------------------------
node e-materai-market-place.js
---------------------------
This e-materai-market-place.js will be use to listed the minted e-Materai NFTs in previous step and make sure each code has unique series code. Then this smartcontract will be use for buying the e-Materai NFTs with price of 11900 HIDR each. So the test make sure the transaction working properly. And make sure the HIDR can be withdraw.


3. Run the following command to execute the test scripts and verify the services of node agreement.js
---------------------------
node agreement.js
---------------------------
This agreement.js is simulate how the agreement will be created by owner, signed by participants, and attached nft e-materai by the owner. The process will be take longer because in this agreement is where what we create in previous steps will be meet each other. Will be handle those associating, approving, sending thing. It's also have to design the system/smartcontract stored data, so it fulfiled what we want use feature in the frontend.

# Acknowledgements
- Special thanks to Hedera - The distributed ledger technology used to deploy and manage the smart contracts.
- Pinata.cloud who provide the IPFS System services 
- Remix IDE - The online Solidity IDE used to write and deploy the smart contract.

